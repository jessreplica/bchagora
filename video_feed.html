<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Fully Isolated Endless Videos</title>
</head>
<body>

<!-- Container for the shadow DOM -->
<div id="video-host"></div>

<script>
const videos = [
  "https://www.pornhub.com/embed/ph62213e75691e7",
  "https://rumble.com/embed/v6pwufh/?pub=4",
  "https://rumble.com/embed/v6pv9wl/?pub=4",
  "https://rumble.com/embed/v6ptvud/?pub=4",
  "https://rumble.com/embed/v6pqxfd/?pub=4",
  "https://rumble.com/embed/v6ppg7r/?pub=4",
  "https://rumble.com/embed/v6pnplz/?pub=4",
  "https://www.pornhub.com/embed/65ae369eda9e0",
  "https://www.pornhub.com/embed/6413cea2b2d72",
  "https://www.pornhub.com/embed/64008dfab5754",
  "https://www.pornhub.com/embed/67222e6e641f9",
  "https://www.pornhub.com/embed/ph5ac2ac3ba135a",
  "https://www.pornhub.com/embed/ph5643c8d34ad95",
  "https://www.pornhub.com/embed/ph61fbd0b1cb6d5",
  "https://www.pornhub.com/embed/663c2e2f58d21",
  "https://www.pornhub.com/embed/ph5eb2e6051ccb9",
  "https://www.pornhub.com/embed/64f8f51acd6f3",
  "https://www.pornhub.com/embed/645e719b098e4",
  "https://www.pornhub.com/embed/ph5df2bb57aa917",
  "https://www.pornhub.com/embed/ph632b29318c6dc",
  "https://www.pornhub.com/embed/6721c9ac50d5c",
  "https://www.pornhub.com/embed/656cd922b3e22",
  "https://www.pornhub.com/embed/ph5d4b45aaa020c",
  "https://www.pornhub.com/embed/ph61ec4cfb1dc78",
  "https://www.pornhub.com/embed/663c0e77462a1",
  "https://www.pornhub.com/embed/66c2b3bdd2d1b",
  "https://www.pornhub.com/embed/ph5f1ed68e9ccca",
  "https://www.pornhub.com/embed/65bf5ea5be4c0",
  "https://www.pornhub.com/embed/ph61df932661802",
  "https://www.pornhub.com/embed/66aab43ff2857",
  "https://www.pornhub.com/embed/65fcb0313368a",
  "https://www.pornhub.com/embed/675b0a844c8a5",
  "https://www.pornhub.com/embed/ph5775713a62cfa",
  "https://www.pornhub.com/embed/66bfed4479738",
  "https://www.pornhub.com/embed/6758538dc66c1",
  "https://www.pornhub.com/embed/ph5d264b8a560b6",
  "https://www.pornhub.com/embed/ph5cc03206653d5",
  "https://www.pornhub.com/embed/643b64817dd15",
  "https://www.pornhub.com/embed/ph57717cd823cb7",
  "https://www.pornhub.com/embed/6627a590886fa",
  "https://www.pornhub.com/embed/663a8f74dfc17",
  "https://www.pornhub.com/embed/ph62ae8f3f2f186",
  "https://www.pornhub.com/embed/ph5eff956f79fba",
  "https://www.pornhub.com/embed/68de5697b6b55",
  "https://www.pornhub.com/embed/ph6123afd1dcc5d",
  "https://www.pornhub.com/embed/67f8a1e595dc9"
];

const host = document.createElement('div');
document.body.appendChild(host);
const shadow = host.attachShadow({ mode: 'open' });

// inject minimal styles to make everything invisible except videos
shadow.innerHTML = `
  <style>
    :host {
      all: initial;
      display: block;
      margin: 0;
      padding: 0;
    }
    #video-feed {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .video-container {
      margin-bottom: 20px;
      border-radius: 12px;
      overflow: hidden;
    }
    iframe {
      width: 100%;
      aspect-ratio: 16/9;
      border: none;
    }
  </style>
  <div id="video-feed"></div>
`;

const feed = shadow.querySelector('#video-feed');

function addVideos(count=10) {
  for (let i = 0; i < count; i++) {
    const div = document.createElement('div');
    div.className = 'video-container';
    const iframe = document.createElement('iframe');
    iframe.src = videos[Math.floor(Math.random() * videos.length)];
    iframe.loading = 'lazy';
    iframe.allow = 'autoplay; fullscreen';
    iframe.allowFullscreen = true;
    div.appendChild(iframe);
    feed.appendChild(div);
  }
}

// create sentinel for infinite scroll detection
const sentinel = document.createElement('div');
sentinel.style.height = '1px';
shadow.querySelector('#video-feed').appendChild(sentinel);

// observer to load more videos when near bottom
const observer = new IntersectionObserver(entries => {
  if (entries[0].isIntersecting) {
    addVideos(10);
  }
}, {
  rootMargin: '200px' // trigger before reaching bottom
});

observer.observe(sentinel);

// initial load
addVideos(10);
</script>
